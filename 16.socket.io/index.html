<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>珠峰聊天室</title>
    <link rel="stylesheet" href="bootstrap.min.css">
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h2 class="text-center">珠峰聊天室</h2>
                </div>
                <div class="panel-body">
                    <ul class="list-group" id="messages">

                    </ul>
                </div>
                <div class="panel-footer">
                    <form role="form" class="form-horizontal">
                        <div class="form-group row">
                            <label for="content" class="control-label col-md-1" >内容</label>
                            <div class="col-md-11">
                               <textarea name="content" id="content" cols="30" rows="10" class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-offset-1 col-md-11">
                                <button type="button" onclick="send()" class="btn btn-primary">发送</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
    // window.io 全局变量
   var socket = io('http://localhost:8080/');
   //当客户端成功连接服务器之后会触发connect事件
   socket.on('connect',function(){
       console.log('连接成功');
       socket.send('服务器你好');
   });
   socket.on('message',function(message){
       let messages = document.querySelector('#messages');
       let li = document.createElement('li');
       li.innerHTML = message;
       li.className = 'list-group-item';
       messages.appendChild(li);
   });
   function send(){
      var area = document.querySelector('#content');
      var content = area.value;
      socket.send(content);
      area.value = '';
   }
</script>
</body>
</html>